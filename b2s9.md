# Taller Individual  3
## Reactive Stream

**Semana**: 9

**Objetivos**:

- Aplicar los conocimientos sobre Reactive Stream.
- Generar y procesar flujos de datos reactivos.



### Descripci√≥n:

Resuelva los siguientes problemas.

### Problema 1
**Sincronizaci√≥n de Sensores**

Descripci√≥n: Simula dos sensores que emiten valores peri√≥dicos:

- Sensor1: Rango [20¬∞C, 30¬∞C], cada 1 segundo.
- Sensor2: Rango [30¬∞C, 40¬∞C], cada 1.5 segundos.
- Usa zip para combinar los valores de ambos sensores en un solo flujo.
- Det√©n el flujo despu√©s de 10 pares de valores.
- Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5¬∞C.
  

```mathematica
Sensor1: 22¬∞C, Sensor2: 27¬∞C, Difference: 5¬∞C
Sensor1: 24¬∞C, Sensor2: 34¬∞C, Difference: 10¬∞C
üö® ALERT! Significant difference detected: 10¬∞C
```

```scala
package Bimestre2.Talleres

import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object SensorSync extends App {
  val sensor1 = Observable.interval(1.second).map(_ => Random.between(20.0, 30.0))
  val sensor2 = Observable.interval(1.5.second).map(_ => Random.between(30.0, 40.0))

  // Combinar los sensores con zip y tomar 10 pares
  sensor1.zip(sensor2)
    .take(10)
      .subscribe(
        onNext = {
          case (temp1, temp2) =>
            val diferencia = Math.abs(temp1 - temp2)
            println(f"Sensor1: $temp1%.0f¬∞C, Sensor2: $temp2%.0f¬∞C, Difference: $diferencia%.0f¬∞C")

            if (diferencia > 5) {
              println(f"üö® ALERT! Significant difference detected: $diferencia%.0f¬∞C")
            }

            println() // l√≠nea en blanco para separar
        },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("Monitoring completed. 10 pairs processed.")
    )
  
  Thread.sleep(16000)
}
```

### Problema 2
**Sistema de Alerta Complejo**

Descripci√≥n: Simula tres sensores que emiten datos peri√≥dicos:

- Sensor1: Temperatura (20¬∞C a 30¬∞C).
- Sensor2: Humedad (40% a 60%).
- Sensor3: Presi√≥n (950 hPa a 1050 hPa).
- Combina los datos de los tres sensores y detecta si alguna de las m√©tricas est√° fuera de rango.
- Det√©n el flujo despu√©s de 20 combinaciones.

```yaml
Temperature: 22¬∞C, Humidity: 50%, Pressure: 970 hPa
Temperature: 25¬∞C, Humidity: 42%, Pressure: 1055 hPa
üö® ALERT! Pressure out of range: 1055 hPa
...
```

```scala
package Bimestre2.Talleres

import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object SistemaAlertaComplejo extends App {
  val temperatura = Observable.interval(1.second).map { _ =>
    if (Random.nextDouble() < 0.8) Random.between(20.0, 30.0)
    else Random.between(15.0, 35.0)
  }

  val humedad = Observable.interval(1.second).map { _ =>
    if (Random.nextDouble() < 0.8) Random.between(40.0, 60.0)
    else Random.between(35.0, 65.0)
  }

  val presion = Observable.interval(1.second).map { _ =>
    if (Random.nextDouble() < 0.8) Random.between(950.0, 1050.0)
    else Random.between(940.0, 1060.0)
  }

  // Combinar los tres flujos
  val datosCombinados = Observable.zip(temperatura, humedad, presion)

  datosCombinados
    .take(20)

    .subscribe(
      onNext = { case (temp, hum, pres) =>
        // Redondear a enteros
        val tempInt = temp.round.toInt
        val humInt = hum.round.toInt
        val presInt = pres.round.toInt


        println(s"Temperature: ${tempInt}¬∞C, Humidity: ${humInt}%, Pressure: ${presInt} hPa")

        var hayAlerta = false

        if (tempInt < 20 || tempInt > 30) {
          println(s"üö® ALERT! Temperature out of range: ${tempInt}¬∞C")
          hayAlerta = true
        }

        if (humInt < 40 || humInt > 60) {
          println(s"üö® ALERT! Humidity out of range: ${humInt}%")
          hayAlerta = true
        }

        if (presInt < 950 || presInt > 1050) {
          println(s"üö® ALERT! Pressure out of range: ${presInt} hPa")
          hayAlerta = true
        }

        // Solo imprime linea en blanco si hubo alerta
        if (hayAlerta) println()
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("Monitoring completed. 20 sets processed.")
    )


  Thread.sleep(21000)
}
```

### Calificaci√≥n:

Para la calificaci√≥n, se debe presentar el trabajo realizado a su tutor. Es necesario recalcar que la presentaci√≥n se hace una √∫nica vez, no existe la posibilidad de presentaciones adicionales con correcciones.

- 10 puntos si presenta en el horario de pr√°cticas y experimentaci√≥n.
- 7 puntos presenta en el horario de tutor√≠a

La hora m√°xima de presentaci√≥n ser√° las 08h30
